import{s as rt,n as de,e as De,r as at,o as Re,h as wt}from"../chunks/scheduler.xxdsvmmB.js";import{S as it,i as ct,e as g,t as R,s as D,c as b,b as T,d as H,f as m,a as P,g as le,h as _,j as J,k as i,n as Z,l as Me,m as oe,r as Pe,A as Ye,u as ge,v as be,w as ke,o as F,q as Y,p as _e,x as we,y as ve}from"../chunks/index.B7xeB--Q.js";import{e as se,C as ut}from"../chunks/index.CQ-YDR-v.js";import{f as Ge,d as Ue,a as xt,b as $t,c as Et}from"../chunks/store.DXPVxIRp.js";import{f as lt,g as He,c as Ne,d as ye,b as Ht,h as st,i as ot,j as nt,k as Mt,l as Yt}from"../chunks/utils.B69g9IoG.js";import{w as Gt}from"../chunks/entry.9APSKGOP.js";import{B as Ct}from"../chunks/index.2A8RO1Gr.js";function Kt(l){let e,t,s,o=Ge(l[0].timestamp)+"",u,r,d,a=l[0].name+"",c,$,V,w,A=l[0].description+"",S,k,I,f,h=l[0].likes===0?"😐":l[0].likes>0?"🔥":"🥶",n,E,L,O=l[0].likes+"",v,B,p,G="👀",z,q,y=l[0].views+"",C;return{c(){e=g("div"),t=g("p"),s=R("Posted "),u=R(o),r=D(),d=g("h1"),c=R(a),V=D(),w=g("p"),S=R(A),k=D(),I=g("div"),f=g("p"),n=R(h),E=D(),L=g("p"),v=R(O),B=D(),p=g("p"),p.textContent=G,z=D(),q=g("p"),C=R(y),this.h()},l(x){e=b(x,"DIV",{class:!0});var j=T(e);t=b(j,"P",{class:!0});var K=T(t);s=H(K,"Posted "),u=H(K,o),K.forEach(m),r=P(j),d=b(j,"H1",{class:!0});var te=T(d);c=H(te,a),te.forEach(m),V=P(j),w=b(j,"P",{class:!0});var W=T(w);S=H(W,A),W.forEach(m),k=P(j),I=b(j,"DIV",{class:!0});var M=T(I);f=b(M,"P",{class:!0});var ne=T(f);n=H(ne,h),ne.forEach(m),E=P(M),L=b(M,"P",{class:!0});var Ve=T(L);v=H(Ve,O),Ve.forEach(m),B=P(M),p=b(M,"P",{class:!0,"data-svelte-h":!0}),le(p)!=="svelte-16w9id3"&&(p.textContent=G),z=P(M),q=b(M,"P",{class:!0});var xe=T(q);C=H(xe,y),xe.forEach(m),M.forEach(m),j.forEach(m),this.h()},h(){_(t,"class","text-sm font-light text-subText/60 -mb-1"),_(d,"class",$="border-subText tracking-tight mb-1 "+(l[1]===l[0].id?"underline opacity-60":"")+" hover:underline cursor-pointer font-medium text-xl"),_(w,"class","mb-1 leading-tight tracking-tight"),_(f,"class","text-xl"),_(L,"class","text-base font-medium tracking-tighter -mb-[1px]"),_(p,"class","text-lg opacity-90 ml-5"),_(q,"class","text-xs opacity-70 font-medium tracking-tighter"),_(I,"class","flex flex-row items-center gap-[2px]"),_(e,"class","w-full border-b-[1px] border-button/30 py-3")},m(x,j){J(x,e,j),i(e,t),i(t,s),i(t,u),i(e,r),i(e,d),i(d,c),i(e,V),i(e,w),i(w,S),i(e,k),i(e,I),i(I,f),i(f,n),i(I,E),i(I,L),i(L,v),i(I,B),i(I,p),i(I,z),i(I,q),i(q,C)},p(x,[j]){j&1&&o!==(o=Ge(x[0].timestamp)+"")&&Z(u,o),j&1&&a!==(a=x[0].name+"")&&Z(c,a),j&3&&$!==($="border-subText tracking-tight mb-1 "+(x[1]===x[0].id?"underline opacity-60":"")+" hover:underline cursor-pointer font-medium text-xl")&&_(d,"class",$),j&1&&A!==(A=x[0].description+"")&&Z(S,A),j&1&&h!==(h=x[0].likes===0?"😐":x[0].likes>0?"🔥":"🥶")&&Z(n,h),j&1&&O!==(O=x[0].likes+"")&&Z(v,O),j&1&&y!==(y=x[0].views+"")&&Z(C,y)},i:de,o:de,d(x){x&&m(e)}}}function Xt(l,e,t){let s;De(l,Ue,u=>t(1,s=u));let{item:o}=e;return l.$$set=u=>{"item"in u&&t(0,o=u.item)},[o,s]}class Jt extends it{constructor(e){super(),ct(this,e,Xt,Kt,rt,{item:0})}}function Tt(l,e,t){const s=l.slice();return s[20]=e[t],s}function It(l,e,t){const s=l.slice();return s[23]=e[t],s}function yt(l){let e,t=se(l[4][l[3]].resources),s=[];for(let o=0;o<t.length;o+=1)s[o]=Dt(It(l,t,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ye()},l(o){for(let u=0;u<s.length;u+=1)s[u].l(o);e=Ye()},m(o,u){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,u);J(o,e,u)},p(o,u){if(u&24){t=se(o[4][o[3]].resources);let r;for(r=0;r<t.length;r+=1){const d=It(o,t,r);s[r]?s[r].p(d,u):(s[r]=Dt(d),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(o){o&&m(e),Pe(s,o)}}}function Dt(l){let e,t=l[23]+"",s,o;return{c(){e=g("a"),s=R(t),this.h()},l(u){e=b(u,"A",{href:!0,class:!0});var r=T(e);s=H(r,t),r.forEach(m),this.h()},h(){_(e,"href",o=l[23]),_(e,"class","underline text-black hover:text-subText")},m(u,r){J(u,e,r),i(e,s)},p(u,r){r&24&&t!==(t=u[23]+"")&&Z(s,t),r&24&&o!==(o=u[23])&&_(e,"href",o)},d(u){u&&m(e)}}}function Pt(l){let e,t,s=l[20].user+"",o,u,r,d=l[20].content+"",a,c,$,V,w="🔥",A,S,k=l[20].likes+"",I,f,h,n="🥶",E,L;function O(){return l[12](l[20])}function v(){return l[13](l[20])}return{c(){e=g("div"),t=g("button"),o=R(s),u=D(),r=g("p"),a=R(d),c=D(),$=g("div"),V=g("button"),V.textContent=w,A=D(),S=g("p"),I=R(k),f=D(),h=g("button"),h.textContent=n,this.h()},l(B){e=b(B,"DIV",{class:!0});var p=T(e);t=b(p,"BUTTON",{class:!0});var G=T(t);o=H(G,s),G.forEach(m),u=P(p),r=b(p,"P",{class:!0});var z=T(r);a=H(z,d),z.forEach(m),c=P(p),$=b(p,"DIV",{class:!0});var q=T($);V=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),le(V)!=="svelte-y5izdb"&&(V.textContent=w),A=P(q),S=b(q,"P",{class:!0});var y=T(S);I=H(y,k),y.forEach(m),f=P(q),h=b(q,"BUTTON",{class:!0,"data-svelte-h":!0}),le(h)!=="svelte-11hj0f5"&&(h.textContent=n),q.forEach(m),p.forEach(m),this.h()},h(){_(t,"class","opacity-70 hover:underline w-fit -mb-[2px] hover:opacity-100 text-sm"),_(r,"class","leading-tight text-base mb-[2px]"),_(V,"class","text-md hover:scale-[1.2] duration-100"),_(S,"class","text-sm font-medium tracking-tighter"),_(h,"class","text-md hover:scale-[1.2] duration-100"),_($,"class","flex flex-row gap-2 items-center w-fit"),_(e,"class","flex flex-col tracking-tight")},m(B,p){J(B,e,p),i(e,t),i(t,o),i(e,u),i(e,r),i(r,a),i(e,c),i(e,$),i($,V),i($,A),i($,S),i(S,I),i($,f),i($,h),E||(L=[oe(V,"click",O),oe(h,"click",v)],E=!0)},p(B,p){l=B,p&32&&s!==(s=l[20].user+"")&&Z(o,s),p&32&&d!==(d=l[20].content+"")&&Z(a,d),p&32&&k!==(k=l[20].likes+"")&&Z(I,k)},d(B){B&&m(e),E=!1,at(L)}}}function Qt(l){let e,t,s=l[4][l[3]].name+"",o,u,r,d,a,c=Ge(l[4][l[3]].timestamp)+"",$,V,w,A,S=l[4][l[3]].user+"",k,I,f,h=l[4][l[3]].description+"",n,E,L,O,v,B="Files coming soon",p,G,z,q,y="Links",C,x,j,K,te,W,M,ne,Ve="🔥",xe,$e,Se=l[4][l[3]].likes+"",Oe,Ke,ie,ft="🥶",Xe,he,dt='<p class="text-xl font-semibold">+</p> <p class="text-xl -mb-1 font-semibold tracking-tighter">💬</p>',Je,ce,pe,ht="👀",Qe,Ee,Be=l[4][l[3]].views+"",je,Ze,ae,Le,ue,re,We,fe,pt="Upload",et,mt,ee=l[4][l[3]].resources&&l[4][l[3]].resources.length>0&&yt(l),Ce=se(l[5]),Q=[];for(let N=0;N<Ce.length;N+=1)Q[N]=Pt(Tt(l,Ce,N));return{c(){e=g("div"),t=g("h1"),o=R(s),u=D(),r=g("div"),d=g("p"),a=R("Posted on "),$=R(c),V=R(" by"),w=D(),A=g("button"),k=R(S),I=D(),f=g("p"),n=R(h),E=D(),L=g("div"),O=D(),v=g("p"),v.textContent=B,p=D(),G=g("div"),z=D(),q=g("p"),q.textContent=y,C=D(),x=g("div"),ee&&ee.c(),j=D(),K=g("div"),te=D(),W=g("div"),M=g("div"),ne=g("button"),ne.textContent=Ve,xe=D(),$e=g("p"),Oe=R(Se),Ke=D(),ie=g("button"),ie.textContent=ft,Xe=D(),he=g("button"),he.innerHTML=dt,Je=D(),ce=g("div"),pe=g("p"),pe.textContent=ht,Qe=D(),Ee=g("p"),je=R(Be),Ze=D(),ae=g("div");for(let N=0;N<Q.length;N+=1)Q[N].c();Le=D(),ue=g("div"),re=g("textarea"),We=D(),fe=g("button"),fe.textContent=pt,this.h()},l(N){e=b(N,"DIV",{class:!0});var U=T(e);t=b(U,"H1",{class:!0});var X=T(t);o=H(X,s),X.forEach(m),u=P(U),r=b(U,"DIV",{class:!0});var me=T(r);d=b(me,"P",{class:!0});var qe=T(d);a=H(qe,"Posted on "),$=H(qe,c),V=H(qe," by"),qe.forEach(m),w=P(me),A=b(me,"BUTTON",{class:!0});var _t=T(A);k=H(_t,S),_t.forEach(m),me.forEach(m),I=P(U),f=b(U,"P",{class:!0});var vt=T(f);n=H(vt,h),vt.forEach(m),E=P(U),L=b(U,"DIV",{class:!0}),T(L).forEach(m),O=P(U),v=b(U,"P",{class:!0,"data-svelte-h":!0}),le(v)!=="svelte-1qxlko8"&&(v.textContent=B),p=P(U),G=b(U,"DIV",{class:!0}),T(G).forEach(m),z=P(U),q=b(U,"P",{class:!0,"data-svelte-h":!0}),le(q)!=="svelte-tf2e"&&(q.textContent=y),C=P(U),x=b(U,"DIV",{class:!0});var gt=T(x);ee&&ee.l(gt),gt.forEach(m),j=P(U),K=b(U,"DIV",{class:!0}),T(K).forEach(m),te=P(U),W=b(U,"DIV",{class:!0});var Te=T(W);M=b(Te,"DIV",{class:!0});var Ie=T(M);ne=b(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),le(ne)!=="svelte-1agh3eu"&&(ne.textContent=Ve),xe=P(Ie),$e=b(Ie,"P",{class:!0});var bt=T($e);Oe=H(bt,Se),bt.forEach(m),Ke=P(Ie),ie=b(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),le(ie)!=="svelte-xywjjq"&&(ie.textContent=ft),Ie.forEach(m),Xe=P(Te),he=b(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),le(he)!=="svelte-m7qzau"&&(he.innerHTML=dt),Je=P(Te),ce=b(Te,"DIV",{class:!0});var Ae=T(ce);pe=b(Ae,"P",{class:!0,"data-svelte-h":!0}),le(pe)!=="svelte-8kn7vk"&&(pe.textContent=ht),Qe=P(Ae),Ee=b(Ae,"P",{class:!0});var kt=T(Ee);je=H(kt,Be),kt.forEach(m),Ae.forEach(m),Te.forEach(m),Ze=P(U),ae=b(U,"DIV",{class:!0});var Fe=T(ae);for(let tt=0;tt<Q.length;tt+=1)Q[tt].l(Fe);Le=P(Fe),ue=b(Fe,"DIV",{class:!0});var ze=T(ue);re=b(ze,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),T(re).forEach(m),We=P(ze),fe=b(ze,"BUTTON",{class:!0,"data-svelte-h":!0}),le(fe)!=="svelte-zjhs9g"&&(fe.textContent=pt),ze.forEach(m),Fe.forEach(m),U.forEach(m),this.h()},h(){_(t,"class","text-2xl tracking-tight font-medium"),_(d,"class","opacity-40"),_(A,"class","hover:underline hover:opacity-100 opacity-65"),_(r,"class","flex flex-row gap-1 mb-2 text-md tracking-tight"),_(f,"class","mb-5 pr-6 leading-tight tracking-tight"),_(L,"class","border-b-[1px] border-button/30"),_(v,"class","mb-5 opacity-40 font-light text-subText"),_(G,"class","border-b-[1px] border-button/30"),_(q,"class","mb-3 opacity-40 font-light text-subText"),_(x,"class","flex flex-col mb-7 leading-tight"),_(K,"class","border-b-[1px] mb-4 border-button/30"),_(ne,"class","text-xl hover:scale-[1.4] duration-100"),_($e,"class","text-md font-semibold tracking-tighter"),_(ie,"class","text-xl hover:scale-[1.4] duration-100"),_(M,"class","flex flex-row gap-2 items-center w-fit"),_(he,"class","flex flex-row hover:scale-[1.2] duration-100 gap-1 items-center w-fit"),_(pe,"class","text-xl"),_(Ee,"class","text-md font-medium mt-[1px] tracking-tighter"),_(ce,"class","flex flex-row gap-1 items-center"),_(W,"class","flex ml-5 flex-row gap-10 border-subText/65 w-fit py-[6px] mb-4 px-6 border-b-[2px] items-center"),_(re,"class","w-full border rounded p-2"),_(re,"rows","4"),_(re,"placeholder","Enter your comment here..."),_(fe,"class","bg-button text-white px-3 py-2 rounded-xl font-medium text-sm mt-2 disabled:opacity-50 w-fit"),_(ue,"class",""),_(ae,"class","flex ml-5 flex-col gap-3 pl-3 h-fit overflow-y-scroll show-scrollbar"),_(e,"class","w-[40%] border-[2.5px] border-button pt-6 pb-4 px-4 bg-buttonText h-full rounded-2xl")},m(N,U){J(N,e,U),i(e,t),i(t,o),i(e,u),i(e,r),i(r,d),i(d,a),i(d,$),i(d,V),i(r,w),i(r,A),i(A,k),i(e,I),i(e,f),i(f,n),i(e,E),i(e,L),i(e,O),i(e,v),i(e,p),i(e,G),i(e,z),i(e,q),i(e,C),i(e,x),ee&&ee.m(x,null),i(e,j),i(e,K),i(e,te),i(e,W),i(W,M),i(M,ne),i(M,xe),i(M,$e),i($e,Oe),i(M,Ke),i(M,ie),i(W,Xe),i(W,he),i(W,Je),i(W,ce),i(ce,pe),i(ce,Qe),i(ce,Ee),i(Ee,je),i(e,Ze),i(e,ae);for(let X=0;X<Q.length;X+=1)Q[X]&&Q[X].m(ae,null);i(ae,Le),i(ae,ue),i(ue,re),Me(re,l[2]),i(ue,We),i(ue,fe),et||(mt=[oe(ne,"click",l[10]),oe(ie,"click",l[11]),oe(re,"input",l[14]),oe(fe,"click",l[15])],et=!0)},p(N,[U]){if(U&24&&s!==(s=N[4][N[3]].name+"")&&Z(o,s),U&24&&c!==(c=Ge(N[4][N[3]].timestamp)+"")&&Z($,c),U&24&&S!==(S=N[4][N[3]].user+"")&&Z(k,S),U&24&&h!==(h=N[4][N[3]].description+"")&&Z(n,h),N[4][N[3]].resources&&N[4][N[3]].resources.length>0?ee?ee.p(N,U):(ee=yt(N),ee.c(),ee.m(x,null)):ee&&(ee.d(1),ee=null),U&24&&Se!==(Se=N[4][N[3]].likes+"")&&Z(Oe,Se),U&24&&Be!==(Be=N[4][N[3]].views+"")&&Z(je,Be),U&416){Ce=se(N[5]);let X;for(X=0;X<Ce.length;X+=1){const me=Tt(N,Ce,X);Q[X]?Q[X].p(me,U):(Q[X]=Pt(me),Q[X].c(),Q[X].m(ae,Le))}for(;X<Q.length;X+=1)Q[X].d(1);Q.length=Ce.length}U&4&&Me(re,N[2])},i:de,o:de,d(N){N&&m(e),ee&&ee.d(),Pe(Q,N),et=!1,at(mt)}}}function Vt(l,e,t){let s="";{const o=new Date;o.setTime(o.getTime()+t*24*60*60*1e3),s="; expires="+o.toUTCString()}document.cookie=l+"="+(e||"")+s+"; path=/"}function St(l){const e=l+"=",t=document.cookie.split(";");for(let s=0;s<t.length;s++){let o=t[s].trim();if(o.indexOf(e)===0)return o.substring(e.length)}return null}function Zt(l,e,t){let s,o,u;De(l,Ue,v=>t(3,s=v)),De(l,lt,v=>t(4,o=v));const r=Gt([]);De(l,r,v=>t(5,u=v)),Re(async()=>{try{const v=await He(Ne(ye,"posts",o[s].id,"comments"));let B=[];v.forEach(p=>{B.push({id:p.id,...p.data()})}),r.set(B)}catch(v){console.error("Error fetching Firestore data: ",v)}});let d=o[s].id;Re(async()=>{try{const v=await He(Ne(ye,"posts",d,"comments"));let B=[];v.forEach(p=>{B.push({id:p.id,...p.data()})}),r.set(B)}catch(v){console.error("Error fetching comments:",v)}});async function a(v,B){const p=`vote_comment_${v}`,G=St(p),z=G?parseInt(G):0;if(z===B){alert("You have already voted in that direction!");return}const q=B-z;try{const y=st(ye,"posts",d,"comments",v);await ot(y,{likes:nt(q)}),Vt(p,B.toString(),1),r.update(C=>C.map(x=>x.id===v?{...x,likes:(x.likes||0)+q}:x))}catch(y){console.error("Error updating comment vote:",y)}}function c(v){a(v,1)}function $(v){a(v,-1)}let V=!1,w="";Re(async()=>{try{const v=await He(Ne(ye,"posts",d,"comments"));let B=[];v.forEach(p=>{B.push({id:p.id,...p.data()})}),r.set(B)}catch(v){console.error("Error fetching comments:",v)}});async function A(){if(!w.trim()){alert("Please enter a comment.");return}try{const v=await Ht(Ne(ye,"posts",d,"comments"),{user:"current user",content:w,likes:0,timestamp:Date.now()});r.update(B=>[...B,{id:v.id,user:"current user",content:w,likes:0,timestamp:new Date}]),t(2,w=""),V=!1}catch(v){console.error("Error uploading comment:",v)}}async function S(v){const B=`vote_post_${d}`,p=St(B),G=p?parseInt(p):0;if(G===v){alert("You have already voted in that direction!");return}const z=v-G;try{const q=st(ye,"posts",d);await ot(q,{likes:nt(z)}),Vt(B,v.toString(),1),lt.update(y=>{const C=y.findIndex(x=>x.id===d);return C!==-1&&(y[C].likes=(y[C].likes||0)+z),y})}catch(q){console.error("Error updating post vote:",q)}}function k(){S(1)}function I(){S(-1)}const f=()=>{k()},h=()=>{I()},n=v=>c(v.id),E=v=>$(v.id);function L(){w=this.value,t(2,w)}return[k,I,w,s,o,u,r,c,$,A,f,h,n,E,L,()=>{A()}]}class Wt extends it{constructor(e){super(),ct(this,e,Zt,Qt,rt,{likePost:0,dislikePost:1})}get likePost(){return this.$$.ctx[0]}get dislikePost(){return this.$$.ctx[1]}}const el={apiKey:"AIzaSyAOkXPkSnGuPjas_IuV2Ty2uYKipvBNAyI",authDomain:"stpp-d9dcb.firebaseapp.com",projectId:"stpp-d9dcb",storageBucket:"stpp-d9dcb.appspot.com",messagingSenderId:"936485037628",appId:"1:936485037628:web:1c38d6de3edd4bea4f0539",measurementId:"G-84794JZ7BF"},tl=Mt(el),Bt=Yt(tl);function Nt(l,e,t){const s=l.slice();return s[17]=e[t],s[19]=t,s}function Ut(l,e,t){const s=l.slice();return s[20]=e[t],s}function Ot(l,e,t){const s=l.slice();return s[23]=e[t],s}function jt(l,e,t){const s=l.slice();return s[26]=e[t],s}function ll(l){let e;return{c(){e=R("Search")},l(t){e=H(t,"Search")},m(t,s){J(t,e,s)},d(t){t&&m(e)}}}function Lt(l){let e,t,s,o,u,r,d,a=se(xt),c=[];for(let f=0;f<a.length;f+=1)c[f]=qt(jt(l,a,f));const $=f=>Y(c[f],1,1,()=>{c[f]=null});let V=se($t),w=[];for(let f=0;f<V.length;f+=1)w[f]=At(Ot(l,V,f));const A=f=>Y(w[f],1,1,()=>{w[f]=null});let S=se(Et),k=[];for(let f=0;f<S.length;f+=1)k[f]=Ft(Ut(l,S,f));const I=f=>Y(k[f],1,1,()=>{k[f]=null});return{c(){e=g("div"),t=g("div");for(let f=0;f<c.length;f+=1)c[f].c();s=D(),o=g("div");for(let f=0;f<w.length;f+=1)w[f].c();u=D(),r=g("div");for(let f=0;f<k.length;f+=1)k[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var h=T(e);t=b(h,"DIV",{class:!0});var n=T(t);for(let O=0;O<c.length;O+=1)c[O].l(n);n.forEach(m),s=P(h),o=b(h,"DIV",{class:!0});var E=T(o);for(let O=0;O<w.length;O+=1)w[O].l(E);E.forEach(m),u=P(h),r=b(h,"DIV",{class:!0});var L=T(r);for(let O=0;O<k.length;O+=1)k[O].l(L);L.forEach(m),h.forEach(m),this.h()},h(){_(t,"class","flex flex-row overflow-x-auto hide-scrollbar gap-2"),_(o,"class","flex flex-row overflow-x-auto hide-scrollbar gap-2"),_(r,"class","flex flex-row overflow-x-auto hide-scrollbar gap-2"),_(e,"class","h-[11rem] justify-center flex flex-col gap-1")},m(f,h){J(f,e,h),i(e,t);for(let n=0;n<c.length;n+=1)c[n]&&c[n].m(t,null);i(e,s),i(e,o);for(let n=0;n<w.length;n+=1)w[n]&&w[n].m(o,null);i(e,u),i(e,r);for(let n=0;n<k.length;n+=1)k[n]&&k[n].m(r,null);d=!0},p(f,h){if(h&2){a=se(xt);let n;for(n=0;n<a.length;n+=1){const E=jt(f,a,n);c[n]?(c[n].p(E,h),F(c[n],1)):(c[n]=qt(E),c[n].c(),F(c[n],1),c[n].m(t,null))}for(ve(),n=a.length;n<c.length;n+=1)$(n);_e()}if(h&4){V=se($t);let n;for(n=0;n<V.length;n+=1){const E=Ot(f,V,n);w[n]?(w[n].p(E,h),F(w[n],1)):(w[n]=At(E),w[n].c(),F(w[n],1),w[n].m(o,null))}for(ve(),n=V.length;n<w.length;n+=1)A(n);_e()}if(h&8){S=se(Et);let n;for(n=0;n<S.length;n+=1){const E=Ut(f,S,n);k[n]?(k[n].p(E,h),F(k[n],1)):(k[n]=Ft(E),k[n].c(),F(k[n],1),k[n].m(r,null))}for(ve(),n=S.length;n<k.length;n+=1)I(n);_e()}},i(f){if(!d){for(let h=0;h<a.length;h+=1)F(c[h]);for(let h=0;h<V.length;h+=1)F(w[h]);for(let h=0;h<S.length;h+=1)F(k[h]);d=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Y(c[h]);w=w.filter(Boolean);for(let h=0;h<w.length;h+=1)Y(w[h]);k=k.filter(Boolean);for(let h=0;h<k.length;h+=1)Y(k[h]);d=!1},d(f){f&&m(e),Pe(c,f),Pe(w,f),Pe(k,f)}}}function qt(l){let e,t,s,o,u,r;t=new ut({props:{text:l[26],selected:l[1].includes(l[26])}});function d(){return l[11](l[26])}return{c(){e=g("button"),ge(t.$$.fragment),s=D()},l(a){e=b(a,"BUTTON",{});var c=T(e);be(t.$$.fragment,c),s=P(c),c.forEach(m)},m(a,c){J(a,e,c),ke(t,e,null),i(e,s),o=!0,u||(r=oe(e,"click",d),u=!0)},p(a,c){l=a;const $={};c&2&&($.selected=l[1].includes(l[26])),t.$set($)},i(a){o||(F(t.$$.fragment,a),o=!0)},o(a){Y(t.$$.fragment,a),o=!1},d(a){a&&m(e),we(t),u=!1,r()}}}function At(l){let e,t,s,o,u,r;t=new ut({props:{text:l[23],selected:l[2].includes(l[23])}});function d(){return l[12](l[23])}return{c(){e=g("button"),ge(t.$$.fragment),s=D()},l(a){e=b(a,"BUTTON",{});var c=T(e);be(t.$$.fragment,c),s=P(c),c.forEach(m)},m(a,c){J(a,e,c),ke(t,e,null),i(e,s),o=!0,u||(r=oe(e,"click",d),u=!0)},p(a,c){l=a;const $={};c&4&&($.selected=l[2].includes(l[23])),t.$set($)},i(a){o||(F(t.$$.fragment,a),o=!0)},o(a){Y(t.$$.fragment,a),o=!1},d(a){a&&m(e),we(t),u=!1,r()}}}function Ft(l){let e,t,s,o,u,r;t=new ut({props:{text:l[20],selected:l[3].includes(l[20])}});function d(){return l[13](l[20])}return{c(){e=g("button"),ge(t.$$.fragment),s=D()},l(a){e=b(a,"BUTTON",{});var c=T(e);be(t.$$.fragment,c),s=P(c),c.forEach(m)},m(a,c){J(a,e,c),ke(t,e,null),i(e,s),o=!0,u||(r=oe(e,"click",d),u=!0)},p(a,c){l=a;const $={};c&8&&($.selected=l[3].includes(l[20])),t.$set($)},i(a){o||(F(t.$$.fragment,a),o=!0)},o(a){Y(t.$$.fragment,a),o=!1},d(a){a&&m(e),we(t),u=!1,r()}}}function sl(l){let e,t="No items found";return{c(){e=g("li"),e.textContent=t},l(s){e=b(s,"LI",{"data-svelte-h":!0}),le(e)!=="svelte-1h6sger"&&(e.textContent=t)},m(s,o){J(s,e,o)},p:de,i:de,o:de,d(s){s&&m(e)}}}function ol(l){let e,t,s=se(l[6]),o=[];for(let r=0;r<s.length;r+=1)o[r]=zt(Nt(l,s,r));const u=r=>Y(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=Ye()},l(r){for(let d=0;d<o.length;d+=1)o[d].l(r);e=Ye()},m(r,d){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(r,d);J(r,e,d),t=!0},p(r,d){if(d&193){s=se(r[6]);let a;for(a=0;a<s.length;a+=1){const c=Nt(r,s,a);o[a]?(o[a].p(c,d),F(o[a],1)):(o[a]=zt(c),o[a].c(),F(o[a],1),o[a].m(e.parentNode,e))}for(ve(),a=s.length;a<o.length;a+=1)u(a);_e()}},i(r){if(!t){for(let d=0;d<s.length;d+=1)F(o[d]);t=!0}},o(r){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)Y(o[d]);t=!1},d(r){r&&m(e),Pe(o,r)}}}function zt(l){let e,t,s,o,u,r;t=new Jt({props:{item:l[17]}});function d(){return l[14](l[19],l[17])}return{c(){e=g("li"),ge(t.$$.fragment),s=D()},l(a){e=b(a,"LI",{});var c=T(e);be(t.$$.fragment,c),s=P(c),c.forEach(m)},m(a,c){J(a,e,c),ke(t,e,null),i(e,s),o=!0,u||(r=oe(e,"click",d),u=!0)},p(a,c){l=a;const $={};c&64&&($.item=l[17]),t.$set($)},i(a){o||(F(t.$$.fragment,a),o=!0)},o(a){Y(t.$$.fragment,a),o=!1},d(a){a&&m(e),we(t),u=!1,r()}}}function Rt(l){let e,t;return e=new Wt({}),{c(){ge(e.$$.fragment)},l(s){be(e.$$.fragment,s)},m(s,o){ke(e,s,o),t=!0},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function nl(l){let e,t="+",s;return{c(){e=g("span"),e.textContent=t,s=R(`
        upload`),this.h()},l(o){e=b(o,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-lttvid"&&(e.textContent=t),s=H(o,`
        upload`),this.h()},h(){_(e,"class","font-black")},m(o,u){J(o,e,u),J(o,s,u)},p:de,d(o){o&&(m(e),m(s))}}}function rl(l){let e,t,s,o,u,r=l[5]?"▲":"▼",d,a,c,$,V,w,A,S,k,I,f,h,n,E,L,O,v,B;V=new Ct({props:{url:"/search",$$slots:{default:[ll]},$$scope:{ctx:l}}});let p=l[5]&&Lt(l);const G=[ol,sl],z=[];function q(C,x){return C[6].length>0?0:1}k=q(l),I=z[k]=G[k](l);let y=l[7]!==-1&&Rt();return L=new Ct({props:{url:"/post",$$slots:{default:[nl]},$$scope:{ctx:l}}}),{c(){e=g("div"),t=g("div"),s=g("div"),o=g("button"),u=R("Filters "),d=R(r),a=D(),c=g("input"),$=D(),ge(V.$$.fragment),w=D(),p&&p.c(),A=D(),S=g("ul"),I.c(),h=D(),y&&y.c(),n=D(),E=g("div"),ge(L.$$.fragment),this.h()},l(C){e=b(C,"DIV",{class:!0});var x=T(e);t=b(x,"DIV",{class:!0});var j=T(t);s=b(j,"DIV",{class:!0});var K=T(s);o=b(K,"BUTTON",{class:!0});var te=T(o);u=H(te,"Filters "),d=H(te,r),te.forEach(m),a=P(K),c=b(K,"INPUT",{class:!0,placeholder:!0,type:!0}),$=P(K),be(V.$$.fragment,K),K.forEach(m),w=P(j),p&&p.l(j),A=P(j),S=b(j,"UL",{class:!0});var W=T(S);I.l(W),W.forEach(m),j.forEach(m),h=P(x),y&&y.l(x),x.forEach(m),n=P(C),E=b(C,"DIV",{class:!0});var M=T(E);be(L.$$.fragment,M),M.forEach(m),this.h()},h(){_(o,"class","text-subText font-medium text-lg whitespace-nowrap"),_(c,"class","border-[2.5px] border-button w-full bg-buttonText text-subText text-base px-4 py-2 rounded-xl font-medium focus:border-subText duration-300 focus:ring-0 focus:shadow-none focus:outline-none"),_(c,"placeholder","Smrt krásných srnců ..."),_(c,"type","text"),_(s,"class","w-full flex flex-row gap-2"),_(S,"class","overflow-y-scroll show-scrollbar p-2"),_(t,"class",f="flex flex-col h-full "+(l[7]===-1?"w-[50%]":"w-[30%]")),_(e,"class","h-[98vh] flex flex-row cursor-default gap-20 items-center justify-center py-10"),_(E,"class","fixed right-10 bottom-10 h-[3.8rem]")},m(C,x){J(C,e,x),i(e,t),i(t,s),i(s,o),i(o,u),i(o,d),i(s,a),i(s,c),Me(c,l[4]),i(s,$),ke(V,s,null),i(t,w),p&&p.m(t,null),i(t,A),i(t,S),z[k].m(S,null),i(e,h),y&&y.m(e,null),J(C,n,x),J(C,E,x),ke(L,E,null),O=!0,v||(B=[oe(o,"click",l[9]),oe(c,"input",l[10])],v=!0)},p(C,[x]){(!O||x&32)&&r!==(r=C[5]?"▲":"▼")&&Z(d,r),x&16&&c.value!==C[4]&&Me(c,C[4]);const j={};x&536870912&&(j.$$scope={dirty:x,ctx:C}),V.$set(j),C[5]?p?(p.p(C,x),x&32&&F(p,1)):(p=Lt(C),p.c(),F(p,1),p.m(t,A)):p&&(ve(),Y(p,1,1,()=>{p=null}),_e());let K=k;k=q(C),k===K?z[k].p(C,x):(ve(),Y(z[K],1,1,()=>{z[K]=null}),_e(),I=z[k],I?I.p(C,x):(I=z[k]=G[k](C),I.c()),F(I,1),I.m(S,null)),(!O||x&128&&f!==(f="flex flex-col h-full "+(C[7]===-1?"w-[50%]":"w-[30%]")))&&_(t,"class",f),C[7]!==-1?y?x&128&&F(y,1):(y=Rt(),y.c(),F(y,1),y.m(e,null)):y&&(ve(),Y(y,1,1,()=>{y=null}),_e());const te={};x&536870912&&(te.$$scope={dirty:x,ctx:C}),L.$set(te)},i(C){O||(F(V.$$.fragment,C),F(p),F(I),F(y),F(L.$$.fragment,C),O=!0)},o(C){Y(V.$$.fragment,C),Y(p),Y(I),Y(y),Y(L.$$.fragment,C),O=!1},d(C){C&&(m(e),m(n),m(E)),we(V),p&&p.d(),z[k].d(),y&&y.d(),we(L),v=!1,at(B)}}}function al(l,e,t){let s,o,u;De(l,lt,n=>t(8,o=n)),De(l,Ue,n=>t(7,u=n));let r=[];Re(async()=>{r=(await He(Ne(Bt,"posts"))).docs.map(E=>({id:E.id,...E.data()})),console.log(r)});let d="",a=[],c=[],$=[],V=!1;async function w(n){try{const E=st(Bt,"posts",n);await ot(E,{views:nt(1)}),console.log("Views updated successfully")}catch(E){console.error("Error updating views:",E)}}const A=()=>{t(5,V=!V)};function S(){d=this.value,t(4,d)}const k=n=>{a.includes(n)?t(1,a=a.filter(E=>E!==n)):t(1,a=[...a,n.toLowerCase()])},I=n=>{c.includes(n)?t(2,c=c.filter(E=>E!==n)):t(2,c=[...c,n.toLowerCase()])},f=n=>{$.includes(n)?t(3,$=$.filter(E=>E!==n)):t(3,$=[...$,n.toLowerCase()])},h=async(n,E)=>{u===-1||u!==n?wt(Ue,u=n,u):wt(Ue,u=-1,u),console.log(u),await w(E.id)};return l.$$.update=()=>{l.$$.dirty&270&&t(6,s=o.filter(n=>{var v,B;const E=a.length===0||((v=n.categories)==null?void 0:v.some(p=>a.includes(p.toLowerCase()))),L=c.length===0||((B=n.subjects)==null?void 0:B.some(p=>c.includes(p.toLowerCase()))),O=$.length===0||$.includes(n.school);return E&&L&&O}))},[w,a,c,$,d,V,s,u,o,A,S,k,I,f,h]}class ml extends it{constructor(e){super(),ct(this,e,al,rl,rt,{incrementDocumentViews:0})}get incrementDocumentViews(){return this.$$.ctx[0]}}export{ml as component};
